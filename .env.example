# =================================================================
# RelivChats API - Environment Variables Template
# =================================================================
# Copy this file to .env and fill in your actual values
# NEVER commit .env to git (it's in .gitignore)
# =================================================================

# =================================================================
# DATABASE
# =================================================================
# PostgreSQL connection URL
# Format: postgresql://<user>:<password>@<host>:<port>/<database>
# Examples:
#   - Neon: postgresql://user:password@ep-xyz.us-east-1.aws.neon.tech/relivchats?sslmode=require
#   - Local: postgresql://postgres:password@localhost:5432/relivchats
DATABASE_URL=postgresql://user:password@host:5432/database_name

# =================================================================
# REDIS & CELERY
# =================================================================
# Redis connection URL (used for Celery broker, rate limiting, caching)
# Format: redis://:<password>@<host>:<port>/<db_number>
# Examples:
#   - Redis Cloud: redis://:password@redis-12345.c1.us-east-1-1.ec2.cloud.redislabs.com:12345/0
#   - Local: redis://localhost:6379/0
REDIS_URL=redis://localhost:6379/0

# =================================================================
# AUTHENTICATION
# =================================================================
# Clerk Secret Key (from Clerk Dashboard > API Keys)
# Format: sk_live_... (production) or sk_test_... (development)
CLERK_SECRET_KEY=sk_test_your_clerk_secret_key_here

# =================================================================
# VECTOR DATABASE (Qdrant)
# =================================================================
# Qdrant Cloud URL (from Qdrant Dashboard > Clusters)
# Format: https://your-cluster-id.us-east4-0.gcp.cloud.qdrant.io
QDRANT_URL=https://your-cluster.cloud.qdrant.io

# Qdrant API Key (from Qdrant Dashboard > API Keys)
QDRANT_API_KEY=your_qdrant_api_key_here

# Qdrant collection name (default: chat_messages)
QDRANT_COLLECTION_NAME=chat_messages

# =================================================================
# AI / GEMINI API
# =================================================================
# Google Gemini API Key (from Google AI Studio > Get API Key)
# Format: AIza...
GEMINI_API_KEY=AIza_your_gemini_api_key_here

# Gemini models (defaults work, customize if needed)
GEMINI_EMBEDDING_MODEL=text-embedding-004
GEMINI_LLM_MODEL=gemini-2.0-flash-exp

# =================================================================
# PAYMENT PROVIDERS
# =================================================================
# RAZORPAY (India)
# Keys from Razorpay Dashboard > Settings > API Keys
# IMPORTANT: Use TEST keys for development, LIVE keys for production
RAZORPAY_KEY_ID=rzp_test_your_key_id_here
RAZORPAY_KEY_SECRET=your_razorpay_key_secret_here
RAZORPAY_WEBHOOK_SECRET=your_razorpay_webhook_secret_here

# STRIPE (Global)
# Keys from Stripe Dashboard > Developers > API Keys
# IMPORTANT: Use TEST keys for development, LIVE keys for production
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key_here
STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key_here
STRIPE_WEBHOOK_SECRET=whsec_your_stripe_webhook_secret_here

# =================================================================
# LOGGING & MONITORING
# =================================================================
# Environment: development | staging | production
ENVIRONMENT=development

# Log level: DEBUG | INFO | WARNING | ERROR | CRITICAL
LOG_LEVEL=INFO

# Log format: json (structured) | human (readable console)
LOG_FORMAT=json

# Enable file logging (logs written to logs/ directory)
ENABLE_FILE_LOGGING=true

# Sentry DSN (optional - from Sentry Dashboard > Settings > Client Keys)
# Leave empty to disable Sentry
# Format: https://public_key@sentry.io/project_id
SENTRY_DSN=

# Sentry trace sampling rate (0.0 - 1.0)
# 0.1 = 10% of requests tracked (recommended for production to reduce costs)
SENTRY_TRACES_SAMPLE_RATE=0.1

# =================================================================
# CORS (Cross-Origin Resource Sharing)
# =================================================================
# Comma-separated list of allowed frontend origins
# IMPORTANT: Update this with your actual frontend domains in production
# Format: ["https://domain1.com","https://domain2.com"]
# Development default: http://localhost:3000
CORS_ORIGINS=["http://localhost:3000","http://localhost:3001"]

# Example for production:
# CORS_ORIGINS=["https://relivchats.com","https://www.relivchats.com","https://app.relivchats.com","https://relivchats.mkpatidar.in","https://www.relivchats.mkpatidar.in","https://app.relivchats.in"]

# =================================================================
# PERFORMANCE TUNING (Optional - defaults work for most cases)
# =================================================================
# Database connection pooling
DB_POOL_SIZE=15
DB_MAX_OVERFLOW=5
DB_POOL_TIMEOUT=10
DB_POOL_RECYCLE=3600

# Insight generation settings
MAX_CONCURRENT_INSIGHTS=3
INSIGHT_GENERATION_TIMEOUT=600
RAG_CHUNK_CACHE_TTL=3600

# Slow operation thresholds (for monitoring)
SLOW_REQUEST_THRESHOLD_SECONDS=2.0
SLOW_DATABASE_QUERY_THRESHOLD_MS=1000

# File upload limits
MAX_UPLOAD_SIZE_MB=25

# Vector/chunking settings
QDRANT_VECTOR_SIZE=3072
QDRANT_TIMEOUT=300
QDRANT_BATCH_SIZE=100
QDRANT_MAX_RETRIES=3
MAX_CHUNK_SIZE=1000
MIN_CHUNK_SIZE=800
CHUNK_OVERLAP=50
TIME_WINDOW_MINUTES=10

# =================================================================
# DEPLOYMENT CHECKLIST
# =================================================================
# Before deploying to production:
# 1. ✓ Set ENVIRONMENT=production
# 2. ✓ Use LIVE payment keys (Razorpay/Stripe)
# 3. ✓ Add production frontend URLs to CORS_ORIGINS
# 4. ✓ Set strong DATABASE_URL password
# 5. ✓ Enable Sentry with valid SENTRY_DSN
# 6. ✓ Set LOG_FORMAT=json for structured logs
# 7. ✓ Rotate all API keys (generate fresh ones)
# 8. ✓ Never commit .env to git
# 9. ✓ Use secrets manager (AWS Secrets Manager, HashiCorp Vault)
# 10. ✓ Set up database backups
# =================================================================
